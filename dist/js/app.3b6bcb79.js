(function(e){function n(n){for(var r,u,c=n[0],i=n[1],s=n[2],f=0,p=[];f<c.length;f++)u=c[f],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&p.push(o[u][0]),o[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(n);while(p.length)p.shift()();return a.push.apply(a,s||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,u=1;u<t.length;u++){var i=t[u];0!==o[i]&&(r=!1)}r&&(a.splice(n--,1),e=c(c.s=t[0]))}return e}var r={},o={app:0},a=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0e83d583":"e9912202","chunk-2d0d328a":"97e8c580"}[e]+".js"}function c(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var r=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=r);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,c.nc&&i.setAttribute("nonce",c.nc),i.src=u(e);var s=new Error;a=function(n){i.onerror=i.onload=null,clearTimeout(f);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",s.name="ChunkLoadError",s.type=r,s.request=a,t[1](s)}o[e]=void 0}};var f=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(n)},c.m=e,c.c=r,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)c.d(t,r,function(n){return e[n]}.bind(null,r));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=n,i=i.slice();for(var f=0;f<i.length;f++)n(i[f]);var d=s;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},1:function(e,n){},"56d7":function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"ActionDoLogin",(function(){return E})),t.d(r,"ActionCheckToken",(function(){return L})),t.d(r,"ActionLoadSession",(function(){return U})),t.d(r,"ActionSetUser",(function(){return I})),t.d(r,"ActionSetToken",(function(){return C})),t.d(r,"ActionSignOut",(function(){return H}));var o={};t.r(o),t.d(o,"hasToken",(function(){return M}));t("e260"),t("e6cf"),t("cca6"),t("a79d");var a,u=t("2b0e"),c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},i=[],s=t("2877"),f={},d=Object(s["a"])(f,c,i,!1,null,null,null),p=d.exports,l=t("2f62"),h={login:{method:"post",url:"auth/signin"},loadSession:{method:"get",url:"load-session"},resetPassword:{method:"post",url:"reset-password"}},m={user:{},token:""},v=t("ade3"),g="AUTH/SET_USER",b="AUTH/SET_TOKEN",k=(a={},Object(v["a"])(a,g,(function(e,n){e.user=n})),Object(v["a"])(a,b,(function(e,n){e.token=n})),a),w=(t("d3b7"),t("d81d"),t("b64b"),t("28dd")),S={auth:h},y=function(e){return function(e){var n=e.status;401===n&&(V.dispatch("auth/ActionSignOut"),window._Vue.$router.push({name:"Login"}))}};u["a"].use(w["a"]);var O=u["a"].http;O.options.root="https://api-projeto-integrado.herokuapp.com/",O.interceptors.push(y),Object.keys(S).map((function(e){S[e]=u["a"].resource("",{},S[e])}));var j=function(e){O.headers.common.Authorization="Bearer ".concat(e)},A=S,T=function(e){return j(e)},P=function(){return localStorage.getItem("token")},x=function(){return localStorage.removeItem("token")},_=function(e){return localStorage.setItem("token",e)},E=function(e,n){var t=e.dispatch;return A.auth.login(n).then((function(e){t("ActionSetUser",e.data.user),t("ActionSetToken",e.data.token)}))},L=function(e){var n=e.dispatch,t=e.state;if(t.token)return Promise.resolve(t.token);var r=P();return r?(n("ActionSetToken",r),n("ActionLoadSession")):Promise.reject(new Error("Token InvÃ¡lido"))},U=function(e){var n=e.dispatch;return new Promise((function(e,t){try{var r=A.auth.loadSession(),o=r.data.user;n("ActionSetUser",o),e()}catch(a){n("ActionSignOut"),t(a)}}))},I=function(e,n){var t=e.commit;t(g,n)},C=function(e,n){var t=e.commit;_(n),T(n),t(b,n)},H=function(e){var n=e.dispatch;T(""),x(),n("ActionSetUser",{}),n("ActionSetToken","")},M=function(e){var n=e.token;return!!n},R={state:m,actions:r,getters:o,mutations:k,namespaced:!0},$=(t("3ca3"),t("ddb0"),[{path:"/login",name:"Login",component:function(){return t.e("chunk-0e83d583").then(t.bind(null,"3551"))}}]),J={auth:R};u["a"].use(l["a"]);var V=new l["a"].Store({modules:J}),q=t("2909"),z=(t("99af"),[{path:"/",name:"Home",component:function(){return t.e("chunk-2d0d328a").then(t.bind(null,"5c28"))}}]),B=[].concat(Object(q["a"])($),Object(q["a"])(z)),D=t("8c4f"),K=t("1da1"),N=(t("96cf"),t("b0c0"),function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(n,t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(document.title="".concat(n.name," - Projeto Integrado"),"Login"===n.name||V.getters["auth/hasToken"]){e.next=13;break}return e.prev=2,e.next=5,V.dispatch("auth/ActionCheckToken");case 5:r({name:n.name}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),r({name:"Login"});case 11:e.next=14;break;case 13:"Login"===n.name&&V.getters["auth/hasToken"]?r({name:"Home"}):r();case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n,t,r){return e.apply(this,arguments)}}());u["a"].use(D["a"]);var F=new D["a"]({routes:B});F.beforeEach(N);var G=F;t("e9fd"),t("be5f"),t("6672");u["a"].config.productionTip=!1,window._Vue=new u["a"]({router:G,store:V,render:function(e){return e(p)}}).$mount("#app")},6672:function(e,n,t){},be5f:function(e,n,t){},e9fd:function(e,n,t){}});
//# sourceMappingURL=app.3b6bcb79.js.map